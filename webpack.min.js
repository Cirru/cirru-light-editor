
config = require('./webpack.config')

fs = require('fs');

module.exports = {
  entry: {
    main: [
      './src/main'
    ]
  },
  output: {
    path: 'dist/',
    filename: '[name].[chunkhash].js',
    publicPath: './dist/'
  },
  resolve: config.resolve,
  module: config.module,
  plugins: [
    function() {
      this.plugin('done', function(stats) {
        content = JSON.stringify(stats.toJson().assetsByChunkName, null, 2)
        return fs.writeFileSync('assets.json', content)
      })
    }
  ]
}
